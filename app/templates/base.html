<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>{% block title %}Small Shardz{% endblock %}</title>
  <link rel="icon" type="image/png" href="https://smallshardz.com/favicon.png"/>
  
  <!-- Bootstrap Icons CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/style.css', _external=False) }}" rel="stylesheet">

  <!-- SweetAlert2 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
</head>
<body class="bg-light">

  <!-- paystack -->
  <script src="https://js.paystack.co/v1/inline.js"></script>

  <!-- Navbar -->
   {% if current_user.is_authenticated %}
  <nav class="navbar navbar-expand-lg bg-white border-bottom sticky-top">
    <div class="container-fluid">
      <!-- Toggle button for sidebar -->
      <button class="btn btn-outline-secondary me-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu">
        â˜°
      </button>
      <!-- logo -->
       <a href="">
        <img src="https://dashboard.smallshardz.com/static/icons/logo.png" alt="Logo" width="150" height="70" class="d-inline-block align-text-top">
       </a>

      <!-- <a class="navbar-brand fw-semibold" href="{{ url_for('dashboard.home') }}">Small Shardz</a> -->

      <div class="d-flex">
        {% if current_user.is_authenticated %}
       
          <button onClick="confirmLogout('{{ url_for('auth.logout') }}')" class="btn btn-outline-secondary btn-sm">Logout</button>
        
        {% else %}
          <a class="btn btn-primary btn-sm" href="{{ url_for('auth.login') }}">Login</a>
        {% endif %}
      </div>
    </div>
  </nav>
  {% endif %}

  <!-- Sidebar (offcanvas left) -->
  <div class="offcanvas offcanvas-start bg-white border-end" tabindex="-1" id="sidebarMenu">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title">Menu</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <!-- diplay well on mobile -->
    <div class="offcanvas-body p-0">
      <nav class="list-group list-group-flush">
        <a href="{{ url_for('dashboard.home') }}" class="list-group-item list-group-item-action">Dashboard</a>
        <a href="{{ url_for('dashboard.billing') }}" class="list-group-item list-group-item-action">Billing</a>
        <a href="{{ url_for('dashboard.settings') }}" class="list-group-item list-group-item-action">Settings</a>
        <a href="{{ url_for('dashboard.api_docs') }}" class="list-group-item list-group-item-action">API Docs</a>
        {% if current_user.is_authenticated %}
  <button 
    id="paystack-button"
    data-email="{{ current_user.email }}"
    data-paystack-key="{{ PAYSTACK_PUBLIC_KEY }}"
    data-amount="1500"
    data-initiate-url="{{ url_for('payment.create_payment_intent') }}" class="" ><i class="bi bi-cup"></i> Buy Me Coffee (NGN 1,500) 
  </button>
    {% endif %}

      </nav>
    </div>
  </div>

  <!-- Page Content -->
  <main class="container py-4">
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        {% for category, msg in messages %}
          Swal.fire({
            icon: "{{ 'error' if category == 'danger' else category }}",
            title: "{{ msg|escape }}",
            showConfirmButton: false,
            timer: 10000,
            toast: true,
            position: 'top-end'
          });
        {% endfor %}
      });
    </script>
  {% endif %}
{% endwith %}

    {% block content %}{% endblock %}
  </main>
  <script>
  function confirmLogout(url) {
    Swal.fire({
      title: 'Logout Confirmation',
      text: "Are you sure you want to logout?",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#d33',
      cancelButtonColor: '#6c757d',
      confirmButtonText: 'Yes, Logout!',
    }).then((result) => {
      if (result.isConfirmed) {
        // Redirect or submit a form
        window.location.href = url;
      }
    });
  }
</script>

<!-- Google Analytics -->
 <script async src="https://www.googletagmanager.com/gtag/js?id="></script>
 <script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   gtag('config', '');
 </script>


  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>window.$zoho=window.$zoho || {};$zoho.salesiq=$zoho.salesiq||{ready:function(){}}</script><script id="zsiqscript" src="https://salesiq.zohopublic.com/widget?wc=siq9e0c920e7b4c9edc429682f6d2e5b6cab0ff8cdfdf2d95c1260944d7e7214eda" defer></script> 
  <script src="{{url_for('static', filename="js/paystack.js")}}"></script>
 <script src="{{url_for('static', filename="js/analytics.js")}}"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
